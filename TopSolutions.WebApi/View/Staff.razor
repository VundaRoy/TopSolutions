@page "/View"
@using TopSolutions.WebApi.Model
@code {
    private List<Staff> staffList = new List<Staff>();
    private Staff newStaff = new Staff();
    private Staff selectedStaff = null;

    protected override void OnInitialized()
    {
        // Initialize with some dummy data
        staffList = new List<Staff>
        {
            new Staff { StaffId = 1, UserName = "jdoe", FirstName = "John", LastName = "Doe", Email = "jdoe@example.com" },
            new Staff { StaffId = 2, UserName = "asmith", FirstName = "Anna", LastName = "Smith", Email = "asmith@example.com" }
        };
    }

    private void AddStaff()
    {
        newStaff.StaffId = staffList.Count + 1;
        staffList.Add(newStaff);
        newStaff = new Staff();
    }

    private void EditStaff(Staff staff)
    {
        selectedStaff = staff;
    }

    private void UpdateStaff()
    {
        selectedStaff = null;
    }

    private void DeleteStaff(Staff staff)
    {
        staffList.Remove(staff);
    }
}

<h3>Staff List</h3>

<table class="table">
    <thead>
        <tr>
            <th>UserName</th>
            <th>FirstName</th>
            <th>LastName</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var staff in staffList)
        {
            <tr>
                <td>@staff.UserName</td>
                <td>@staff.FirstName</td>
                <td>@staff.LastName</td>
                <td>@staff.Email</td>
                <td>
                    <button @onclick="() => EditStaff(staff)">Edit</button>
                    <button @onclick="() => DeleteStaff(staff)">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<h3>Add New Staff</h3>
<div>
    <input @bind="newStaff.UserName" placeholder="UserName" />
    <input @bind="newStaff.FirstName" placeholder="FirstName" />
    <input @bind="newStaff.LastName" placeholder="LastName" />
    <input @bind="newStaff.Email" placeholder="Email" />
    <input @bind="newStaff.Address" placeholder="Address" />
    <input @bind="newStaff.City" placeholder="City" />
    <input @bind="newStaff.SubNationalEntity" placeholder="SubNationalEntity" />
    <input @bind="newStaff.Country" placeholder="Country" />
    <button @onclick="AddStaff">Add</button>
</div>

@if (selectedStaff != null)
{
    <h3>Edit Staff</h3>
    <div>
        <input @bind="selectedStaff.UserName" placeholder="UserName" />
        <input @bind="selectedStaff.FirstName" placeholder="FirstName" />
        <input @bind="selectedStaff.LastName" placeholder="LastName" />
        <input @bind="selectedStaff.Email" placeholder="Email" />
        <input @bind="selectedStaff.Address" placeholder="Address" />
        <input @bind="selectedStaff.City" placeholder="City" />
        <input @bind="selectedStaff.SubNationalEntity" placeholder="SubNationalEntity" />
        <input @bind="selectedStaff.Country" placeholder="Country" />
        <button @onclick="UpdateStaff">Update</button>
    </div>
}
